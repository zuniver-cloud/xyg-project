# 接口说明

## 需求模板管理接口

### **1. 获取模板列表**

#### **接口信息**
- **URL**: `/api/templates/query`
- **方法**: `GET`
- **描述**: 获取模板列表，支持分页和搜索

#### **请求参数**
```javascript
{
  "page": 1,           // 页码，默认1
  "size": 10,     // 每页数量，默认10
  "keyword": "",       // 搜索关键词，可选
  "template_sort": "",    // 模板分类，可选
  "publisher":""//发布人
}
```
#### **期望响应**
```javascript
{
  "code": 00,
  "message": "success",
  "data": {
    "page": 1,
    "size": 10,
    "total": 23,
    "total_pages": 3,
    "templates": [
      {
        "template_id": 101,
        "template_name": "ER表设计模板",
        "context": "该模板用于ER设计",
        "json_text": {
          "raw_text": "请设计一张 {表名} 表，包含字段 {字段集合}。",
          "variables": [
            { "name": "表名", "desc": "数据库表的名称" ,"value":"null"},
            { "name": "字段集合", "desc": "字段及数据类型说明","value":"null" }
          ]
        },
        "publisher": "admin",
        "published_at": "2025-08-20 10:12:30",
        "last_modified": "2025-08-20 11:45:10"
      },
      {
        "template_id": 102,
        "template_name": "接口设计模板",
        "context": "用于接口设计模板",
        "json_text": {
          "raw_text": "请设计接口 {接口名}，输入参数 {输入集合}，输出参数 {输出集合}。",
          "variables": [
            { "name": "接口名", "desc": "接口的名称" },
            { "name": "输入集合", "desc": "输入参数及说明" },
            { "name": "输出集合", "desc": "输出参数及说明" }
          ]
        },
        "publisher": "admin",
        "published_at": "2025-08-19 09:00:00",
        "last_modified": "2025-08-19 10:15:22"
      }
    ]
  }
}

```

## ER模型获取接口

**查询ER模型**:
**接口地址**: `POST /api/er/query`
**调用报文**:  

```javascript
// 开发环境
{
  "startTime": "2025-08-16",
  "endTime":"2025-08-17",
  "erName":"图书",
  "pageNum":1,
  "pageSize"：10
}
```

**接口返回示例**: 
```javascript
// 开发环境
{
  "data": {
    "records": [
      {
        "erId": "10",
        "erName": "图书系统",
        "description": "一个图书系统的FR模型",
        "erJson": "{}",
        "updateAt": "2025-08-15 00:00:00"
      }
    ]
  },
  "total": 5,
  "msg": "ER模型结果查询成功",
  "code": "0"
}
```


##  登录接口
**接口地址**: `POST /api/home/login`
#### **请求参数**
```javascript
{
  "userId":"001779999",
  "password":"11"
}
```
#### **期望响应**
```javascript
{
  "msg":"操作成功"，
  "code":0,
  "data":{
    "userId":"",
    "token":""
  }
}
```
##  用户管理接口

### 新增用户

**接口地址**: `POST /api/admin/userManagement/addUser`
**请求示例**:
```json
{
  "userId": "",
  "username":"",
  "password":"",
  "role":"",
  "status":""
}
```

**响应示例**:
```json
{
  "msg": "保存成功",
  "code": "0"//除0以外都失败
}
```
### 删除用户

**接口地址**: `DELETE /api/admin/userManagement/deleteUser/{userId}`
**请求示例**:
```json
{
  "userId": "",
}
```

**响应示例**:
```json
{
  "msg": "删除用户成功",
  "code": "0"//除0以外都失败
}
```
### 分页查询用户

**接口地址**: `POST /api/admin/userManagement/page`
**请求示例**:
```json
{
  "role": 1,//1是管理员，0是用户
  "keyword":"查询关键字",
  "pageNum":1,
  "pageSize":5

}
```

**响应示例**:
```json
{
  "msg": "操作成功",
  "code": "0"//除0以外都失败
  "data":{
    "total":3,
    "records":[
      {
        "role":1,
        "updateAt":"2025-09-03 16:21:03",
        "userId":"1",
        "createAt":"2025-09-03 16:21:03",
        "username":"",
        "status":1//1是激活，0是禁用

      }
    ]
  }
}
```
### 更新用户

**接口地址**: `PUT /api/admin/updateUser`
**请求示例**:
```json
{
        "role":1,
        "userId":"1",
        "username":"",
        "password":"",
        "status":1//1是激活，0是禁用
}
```

**响应示例**:
```json
{
  "msg": "操作成功",
  "code": "0"//除0以外都失败
  "data":{
    "total":3,
    "records":[
      {
        "role":1,
        "updateAt":"2025-09-03 16:21:03",
        "userId":"1",
        "createAt":"2025-09-03 16:21:03",
        "username":"",
        "status":1//1是激活，0是禁用

      }
    ]
  }
}
```
## 需求仓库管理

**保存到我的需求**:

**请求示例**:
**接口地址**: `POST /api/requirement/create`
```json
{
  "requirementName":"需求名称",//需求名称
  "context":"",//需求描述
  "jsonText":"{"raw_text":"请设计一张 {表名} 表，包含字段 {字段集合}。","variables":"[]"}"//需求内容
}
```

**响应示例**:
```json
{
  "msg": "保存成功",
  "code": "0"//除0以外都失败
}
```

**删除我的需求**:
**请求示例**:
**接口地址**: `DELETE /api/requirement/delete/{requirementId}`
```json
{
  "requirementId":,//需求id

}
```

**响应示例**:
```json
{
  "msg": "操作成功",
  "code": "0"//除0以外都失败
}
```

**请求示例**:
**响应示例**:

**分页查询我的需求**:

**请求示例**:
**接口地址**: `POST /api/requirement/query`
```json
{
  "pageNum":1,
  "pageSize":5,
  "keyword":"",//查询关键字,可以为空
  "startTime":"2025-09-01 00：00：00",//可以为空
  "endTime":"2025-09-06 00：00：00",//可以为空
}
```

**响应示例**:
```json
{
  "msg": "操作成功",
  "code": 0,
  "data": {
    "total": 2,
    "records": [
      {
        "requirementName": "跨境电商需求1",
        "context": "我们公司需要开发一个会员订单管理系统，主要功能包括：1.会员注册、登录、信息管理；2.商品展示、搜索、购买；3.订单创建、支付、跟踪；4.会员等级、积分管理",
        "updateAt": "2025-09-02 10:15:02",
        "requirementId": 5,
        "jsonText": "{\"raw_text\":\"请设计一张{表名}表，包含字段{字段集合}。\",\"variables\":[{\"desc\":\"数据库表的名称\",\"name\":\"表名\",\"value\":\"商品\"},{\"desc\":\"字段及数据类型说明\",\"name\":\"字段集合\",\"value\":\"价格\"}]}"
      },
      {
        "requirementName": "用户管理系统需求",
        "context": "设计一个完整的用户管理系统，包括用户注册、登录、权限管理等功能",
        "updateAt": "2025-09-01 14:30:15",
        "requirementId": 6,
        "jsonText": "{\"raw_text\":\"请设计{系统名称}系统，包含{功能模块}等模块。\",\"variables\":[{\"desc\":\"系统名称\",\"name\":\"系统名称\",\"value\":\"用户管理\"},{\"desc\":\"功能模块描述\",\"name\":\"功能模块\",\"value\":\"用户注册、登录、权限管理\"}]}"
      }
    ]
  }
}
```

**修改我的需求**:

**请求示例**:
**接口地址**: `POST /api/requirement/query`
```json
{
        "requirementName": "用户管理系统需求",
        "context": "设计一个完整的用户管理系统，包括用户注册、登录、权限管理等功能",
        "requirementId": 6,
        "jsonText": "{\"raw_text\":\"请设计{系统名称}系统，包含{功能模块}等模块。\",\"variables\":[{\"desc\":\"系统名称\",\"name\":\"系统名称\",\"value\":\"用户管理\"},{\"desc\":\"功能模块描述\",\"name\":\"功能模块\",\"value\":\"用户注册、登录、权限管理\"}]}"
}
```

**响应示例**:
```json
{
  "msg": "操作成功",
  "code": "0"//除0以外都失败
}
```

## 数据标准管理

**分页查询数据标准**:

**请求示例**:
**接口地址**: `POST /api/standard/query`
```json
{
  "erId":1,//可空
  "startTime":"",//可空
  "endTime"："",//可空
  "standardName":"",
  "pageNum":1,
  "pageSize":10
}
```

**响应示例**:
```json
{
  "msg": "查询成功",
  "code": "0",//除0以外都失败
  "data":{
    "records":[
      {
        "standardId":20,//数据标准id
        "standardName":"",//数据标准名
        "description":"",//数据标准描述
        "standardJson":"",//数据标准内容
        "updateAt"："2025-08-16"//更新时间
      }
    ],
    "total":15
  }
}
```
**修改数据标准**:

**请求示例**:
**接口地址**: `POST /api/standard/edit`
```json
{
    "standardId":20,//数据标准id
    "standardName":"",//数据标准名
    "description":"",//数据标准描述
    "standardJson":"",//数据标准内容
    
}
```

**响应示例**:
```json
{
  "msg": "操作成功",
  "code": "0"//除0以外都失败
}
```

**删除数据标准**:

**请求示例**:
**接口地址**: `DELETE /api/standard/remove/{standardId}`
```json
{
    "standardId":20,//数据标准id
}
```

**响应示例**:
```json
{
  "msg": "操作成功",
  "code": "0"//除0以外都失败
}
```

**生成数据标准**:
**接口地址**: `POST /api/standard/generate`
**调用报文**:  

```javascript
// 开发环境
{
  "erId": "1",
  "erJson": "{}",
}
```

**接口返回示例**: 
```javascript
// 开发环境
{
  "code":0,
  "msg":"获取成功"，
  "data":{
    "erId":1,
    "standardId":1,
    "standardName":"数据标准名称"，
    "description":"数据标准描述",
    "standardJson":{
[
  {
    "实体名": "Customer",
    "字段列表": [
      {
        "字段英文名": "ZONENO",
        "字段中文名": "地区号",
        "字段类型": "VARCHAR",
        "长度": "5字符",
        "小数": null,
        "数据标准": {
          "来源": "is2010/F-PMS-业务参数与产品参数管理",
          "类型": "编码",
          "长度": "5",
          "精度": "0",
          "格式": null
        },
        "security_level": 1,
        "category_1": "客户数据",
        "category_2": "个人客户",
        "category_3": "管理信息",
        "category_4": "/",
        "category_5": "/"
      },
      {
        "字段英文名": "CUSTNAME",
        "字段中文名": "客户名称",
        "字段类型": "VARCHAR",
        "长度": "100字符",
        "小数": null,
        "数据标准": {
          "来源": "is2010/F-PMS-客户信息管理",
          "类型": "文本",
          "长度": "100",
          "精度": "0",
          "格式": null
        },
        "security_level": 2,
        "category_1": "客户数据",
        "category_2": "个人客户",
        "category_3": "基本信息",
        "category_4": "/",
        "category_5": "/"
      }
    ]
  }
]
    }
  }
  }

```