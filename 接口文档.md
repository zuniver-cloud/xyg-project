# æ¥å£æ–‡æ¡£

## ğŸ“‹ **æ¦‚è¿°**

æœ¬æ–‡æ¡£æè¿°äº†æ¨¡æ¿ç®¡ç†å’ŒERæ¨¡å‹ç”ŸæˆåŠŸèƒ½çš„ç›¸å…³æ¥å£ï¼ŒåŒ…å«è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡çš„è¯¦ç»†è¯´æ˜ã€‚

---

## ğŸ¯ **æ¨¡æ¿ç®¡ç†åŠŸèƒ½æ¥å£**

### **1. è·å–æ¨¡æ¿åˆ—è¡¨**

#### **æ¥å£ä¿¡æ¯**
- **URL**: `/api/templates/query`
- **æ–¹æ³•**: `GET`
- **æè¿°**: è·å–æ¨¡æ¿åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µå’Œæœç´¢

#### **è¯·æ±‚å‚æ•°**
```javascript
{
  "page": 1,           // é¡µç ï¼Œé»˜è®¤1
  "size": 10,     // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10
  "keyword": "",       // æœç´¢å…³é”®è¯ï¼Œå¯é€‰
  "template_sort": "",    // æ¨¡æ¿åˆ†ç±»ï¼Œå¯é€‰
  "publisher":""//å‘å¸ƒäºº
}
```
è¯·æ ¹æ®ä»¥ä¸‹ç”µå•†ä¸šåŠ¡éœ€æ±‚ï¼Œå®Œæˆç›¸å…³ä»»åŠ¡ï¼šä¸šåŠ¡æ¨¡å—ï¼š{ä¸šåŠ¡æ¨¡å—}åŠŸèƒ½æè¿°ï¼š{åŠŸèƒ½æè¿°}è¾“å…¥æ¡ä»¶ï¼š{è¾“å…¥æ¡ä»¶}å¤„ç†é€»è¾‘ï¼š{å¤„ç†é€»è¾‘}è¾“å‡ºç»“æœï¼š{è¾“å‡ºç»“æœ}æ³¨æ„äº‹é¡¹ï¼š{æ³¨æ„äº‹é¡¹}
#### **æœŸæœ›å“åº”**
```javascript
{
  "code": 00,
  "message": "success",
  "data": {
    "page": 1,
    "size": 10,
    "total": 23,
    "total_pages": 3,
    "templates": [
      {
        "template_id": 101,
        "template_name": "ERè¡¨è®¾è®¡æ¨¡æ¿",
        "context": "è¯¥æ¨¡æ¿ç”¨äºERè®¾è®¡",
        "json_text": {
          "raw_text": "è¯·è®¾è®¡ä¸€å¼  {è¡¨å} è¡¨ï¼ŒåŒ…å«å­—æ®µ {å­—æ®µé›†åˆ}ã€‚",
          "variables": [
            { "name": "è¡¨å", "desc": "æ•°æ®åº“è¡¨çš„åç§°" ,"value":"null"},
            { "name": "å­—æ®µé›†åˆ", "desc": "å­—æ®µåŠæ•°æ®ç±»å‹è¯´æ˜","value":"null" }
          ]
        },
        "publisher": "admin",
        "published_at": "2025-08-20 10:12:30",
        "last_modified": "2025-08-20 11:45:10"
      },
      {
        "template_id": 102,
        "template_name": "æ¥å£è®¾è®¡æ¨¡æ¿",
        "context": "ç”¨äºæ¥å£è®¾è®¡æ¨¡æ¿",
        "json_text": {
          "raw_text": "è¯·è®¾è®¡æ¥å£ {æ¥å£å}ï¼Œè¾“å…¥å‚æ•° {è¾“å…¥é›†åˆ}ï¼Œè¾“å‡ºå‚æ•° {è¾“å‡ºé›†åˆ}ã€‚",
          "variables": [
            { "name": "æ¥å£å", "desc": "æ¥å£çš„åç§°" },
            { "name": "è¾“å…¥é›†åˆ", "desc": "è¾“å…¥å‚æ•°åŠè¯´æ˜" },
            { "name": "è¾“å‡ºé›†åˆ", "desc": "è¾“å‡ºå‚æ•°åŠè¯´æ˜" }
          ]
        },
        "publisher": "admin",
        "published_at": "2025-08-19 09:00:00",
        "last_modified": "2025-08-19 10:15:22"
      }
    ]
  }
}

```

### **2. è·å–æ¨¡æ¿è¯¦æƒ…**

#### **æ¥å£ä¿¡æ¯**
- **URL**: `/api/templates/{template_id}`
- **æ–¹æ³•**: `GET`
- **æè¿°**: è·å–æŒ‡å®šæ¨¡æ¿çš„è¯¦ç»†ä¿¡æ¯

#### **è¯·æ±‚å‚æ•°**
```javascript
// è·¯å¾„å‚æ•°
{
  "template_id": 1  // æ¨¡æ¿ID
}
```

#### **æœŸæœ›å“åº”**
```javascript
{
  "code": 00,
  "msg": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "template_id": 1,
    "template_name": "ç”µå•†ç³»ç»Ÿæ¨¡æ¿",
    "context": "é€‚ç”¨äºç”µå•†å¹³å°çš„æ•°æ®åº“è®¾è®¡æ¨¡æ¿",
    "template_sort": "ç”µå•†",
    "json_text": {
          "raw_text": "è¯·è®¾è®¡ä¸€å¼  {è¡¨å} è¡¨ï¼ŒåŒ…å«å­—æ®µ {å­—æ®µé›†åˆ}ã€‚",
          "variables": [
            { "name": "è¡¨å", "desc": "æ•°æ®åº“è¡¨çš„åç§°" },
            { "name": "å­—æ®µé›†åˆ", "desc": "å­—æ®µåŠæ•°æ®ç±»å‹è¯´æ˜" }
          ]
        },
        "publisher": "admin",
        "published_at": "2025-08-20 10:12:30",
        "last_modified": "2025-08-20 11:45:10"
      }
  }

```

### **3. åˆ›å»ºæ¨¡æ¿**

#### **æ¥å£ä¿¡æ¯**
- **URL**: `/api/templates`
- **æ–¹æ³•**: `POST`
- **æè¿°**: åˆ›å»ºæ–°çš„æ¨¡æ¿

#### **è¯·æ±‚æŠ¥æ–‡**
```javascript
{
  "template_name": "æ•°æ®åº“è¡¨è®¾è®¡",
  "context": "ERå›¾è®¾è®¡æ¨¡æ¿ï¼ˆä¿®æ”¹ç‰ˆï¼‰",
  "json_text": {
    "raw_text": "è¯·è®¾è®¡ä¸€å¼  {è¡¨å} è¡¨ï¼Œå­—æ®µä¸º {å­—æ®µé›†åˆ}ï¼Œå¹¶ä¸”æ·»åŠ å¤‡æ³¨ {å¤‡æ³¨}ã€‚",
    "variables": [
      { "name": "è¡¨å", "desc": "æ•°æ®åº“è¡¨çš„åç§°" },
      { "name": "å­—æ®µé›†åˆ", "desc": "å­—æ®µåŠæ•°æ®ç±»å‹è¯´æ˜" },
      { "name": "å¤‡æ³¨", "desc": "é¢å¤–çš„è¯´æ˜ä¿¡æ¯" }
    ]
  },
  "publisher": "editor"
}

```

#### **æœŸæœ›å“åº”**
```javascript
{
  "code": 00,
  "message": "æ¨¡æ¿å½•å…¥æˆåŠŸ",
  "data": {
    "template_id": 101,
    "template_name":"æ•°æ®åº“è¡¨è®¾è®¡"
  }
}

```

### **4. æ›´æ–°æ¨¡æ¿**

#### **æ¥å£ä¿¡æ¯**
- **URL**: `/api/templates/{template_id}`
- **æ–¹æ³•**: `PUT`
- **æè¿°**: æ›´æ–°æŒ‡å®šæ¨¡æ¿

#### **è¯·æ±‚æŠ¥æ–‡**
```javascript
{
  "template_id": 101,
  "context": "ERå›¾è®¾è®¡æ¨¡æ¿ï¼ˆä¿®æ”¹ç‰ˆï¼‰",
  "json_text": {
    "raw_text": "è¯·è®¾è®¡ä¸€å¼  {è¡¨å} è¡¨ï¼Œå­—æ®µä¸º {å­—æ®µé›†åˆ}ï¼Œå¹¶ä¸”æ·»åŠ å¤‡æ³¨ {å¤‡æ³¨}ã€‚",
    "variables": [
      { "name": "è¡¨å", "desc": "æ•°æ®åº“è¡¨çš„åç§°" },
      { "name": "å­—æ®µé›†åˆ", "desc": "å­—æ®µåŠæ•°æ®ç±»å‹è¯´æ˜" },
      { "name": "å¤‡æ³¨", "desc": "é¢å¤–çš„è¯´æ˜ä¿¡æ¯" }
    ]
  },
  "publisher": "editor"
}

```

#### **æœŸæœ›å“åº”**
```javascript
{
  "code": 00,
  "message": "æ¨¡æ¿æ›´æ–°æˆåŠŸ",
  "data": {
    "template_id": 101,
    "context": "ERå›¾è®¾è®¡æ¨¡æ¿ï¼ˆä¿®æ”¹ç‰ˆï¼‰",
    "json_text": {
      "raw_text": "è¯·è®¾è®¡ä¸€å¼  {è¡¨å} è¡¨ï¼Œå­—æ®µä¸º {å­—æ®µé›†åˆ}ï¼Œå¹¶ä¸”æ·»åŠ å¤‡æ³¨ {å¤‡æ³¨}ã€‚",
      "variables": [
        { "name": "è¡¨å", "desc": "æ•°æ®åº“è¡¨çš„åç§°" },
        { "name": "å­—æ®µé›†åˆ", "desc": "å­—æ®µåŠæ•°æ®ç±»å‹è¯´æ˜" },
        { "name": "å¤‡æ³¨", "desc": "é¢å¤–çš„è¯´æ˜ä¿¡æ¯" }
      ]
    },
    "publisher": "editor",
    "published_at": "2025-08-20 14:10:00",
    "last_modified": "2025-08-20 15:30:00"
  }
}

```

### **5. åˆ é™¤æ¨¡æ¿**

#### **æ¥å£ä¿¡æ¯**
- **URL**: `/api/templates/{template_id}`
- **æ–¹æ³•**: `DELETE`
- **æè¿°**: åˆ é™¤æŒ‡å®šæ¨¡æ¿

#### **è¯·æ±‚å‚æ•°**
```javascript
// è·¯å¾„å‚æ•°
{
  "template_id": 3  // æ¨¡æ¿ID
}
```

#### **æœŸæœ›å“åº”**
```javascript
{
  "code": 00,
  "msg": "åˆ é™¤æˆåŠŸ",
  "data": null
}
```

---

## ğŸ—ï¸ **ERæ¨¡å‹ç”ŸæˆåŠŸèƒ½æ¥å£**

### **1. è·å–éœ€æ±‚åˆ—è¡¨**

#### **æ¥å£ä¿¡æ¯**
- **URL**: `/api/requirements`
- **æ–¹æ³•**: `GET`
- **æè¿°**: è·å–éœ€æ±‚åˆ—è¡¨ï¼Œç”¨äºERæ¨¡å‹ç”Ÿæˆ

#### **è¯·æ±‚å‚æ•°**
```javascript
{
  "userId":01         //ç”¨æˆ·id
  "pageNum": 1,           // é¡µç ï¼Œé»˜è®¤1
  "pageSize": 10,     // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10
  "keyword": "",       // æœç´¢å…³é”®è¯ï¼Œå¯é€‰
  "status": "active"   // éœ€æ±‚çŠ¶æ€ï¼Œå¯é€‰å€¼ï¼šactive/inactive
}
```

#### **æœŸæœ›å“åº”**
```javascript
{
  "code": 00,
  "msg": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "total": 30,
    "page": 1,
    "page_size": 10,
    "requirements": [
      {
        "requirement_id": 1,
        "user_id":2001,
        "requirement_name": "ä¼šå‘˜è®¢å•ç®¡ç†ç³»ç»Ÿéœ€æ±‚",
        "requirement": "éœ€è¦ä¸€ä¸ªä¼šå‘˜è®¢å•ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«ä¼šå‘˜ç®¡ç†ã€è®¢å•ç®¡ç†ã€å•†å“ç®¡ç†ç­‰åŠŸèƒ½",
        "context": "æˆ‘ä»¬å…¬å¸éœ€è¦å¼€å‘ä¸€ä¸ªä¼šå‘˜è®¢å•ç®¡ç†ç³»ç»Ÿï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š1. ä¼šå‘˜æ³¨å†Œã€ç™»å½•ã€ä¿¡æ¯ç®¡ç†ï¼›2. å•†å“å±•ç¤ºã€æœç´¢ã€è´­ä¹°ï¼›3. è®¢å•åˆ›å»ºã€æ”¯ä»˜ã€è·Ÿè¸ªï¼›4. ä¼šå‘˜ç­‰çº§ã€ç§¯åˆ†ç®¡ç†",
        "json_text": {
        "raw_text": "è¯·è®¾è®¡ä¸€å¼  {è¡¨å} è¡¨ï¼Œå­—æ®µä¸º {å­—æ®µé›†åˆ}",
        "variables": [
        { "name": "è¡¨å", "desc": "æ•°æ®åº“è¡¨çš„åç§°", "value":"å•†å“"  }, 
        { "name": "å­—æ®µé›†åˆ", "desc": "å­—æ®µåŠæ•°æ®ç±»å‹è¯´æ˜", "value": "ä»·æ ¼" } 
      ],
      "status":"active",
      "created_at":"2025-08-20 17:00:00",
      "updated_at":"2025-8-20 17:00:00"
    }
      }
    ]
  }
}
```

### **2. ç”ŸæˆERæ¨¡å‹**

#### **æ¥å£ä¿¡æ¯**
- **URL**: `/api/er/generate`
- **æ–¹æ³•**: `POST`
- **æè¿°**: æ ¹æ®éœ€æ±‚ç”ŸæˆERæ¨¡å‹

#### **è¯·æ±‚æŠ¥æ–‡**
```javascript
{
  "template_id": 1,  // å¯é€‰ï¼Œä½¿ç”¨çš„æ¨¡æ¿ID
  "userId":"1000003",
  "requirement":["1","2"],//è¿™ä¸ªæ„æ€å°±æ˜¯è¯´æå–å‡ºæ¥ "raw_text": "è¯·è®¾è®¡ä¸€å¼  {å•†å“} è¡¨ï¼Œå­—æ®µä¸º {ä»·æ ¼ï¼Œç§ç±»}ï¼Œå¹¶ä¸”æ·»åŠ å¤‡æ³¨{å¤‡æ³¨}ä¸­çš„å˜é‡ï¼ŒæŠŠå˜é‡å€¼å°±æ˜¯descæ‹¼æˆä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼Œä¼ ç»™åç«¯ï¼Œåç«¯å°±æ¥æ”¶åˆ°çš„æ˜¯æ¨¡æ¿idå»æ‰¾æ¨¡æ¿ï¼Œå¹¶é€šè¿‡è¿™ä¸ªå­—ç¬¦æ•°ç»„å»æ‹¼æˆä¸€ä¸ªå®Œæ•´çš„æè¿°ï¼Œè¿™ä¸ªæ˜¯åç«¯å»å¤„ç†çš„é€»è¾‘ï¼Œæˆ‘åªæ˜¯ç»™ä½ è¯´ä¸ºä»€ä¹ˆä¼ é€’è¿™å‡ ä¸ªå‚æ•°ã€‚
}
```

#### **æœŸæœ›å“åº”**
```javascript
{
  "code": 00,
  "msg": "ç”ŸæˆæˆåŠŸ",
  "data": {
    "erId": "temp_12345",
    "erName": "111",
    "description": "åŸºäºéœ€æ±‚'ä¼šå‘˜è®¢å•ç®¡ç†ç³»ç»Ÿéœ€æ±‚'ç”Ÿæˆçš„æ•°æ®åº“è®¾è®¡",
    "entities": [
      {
        "name": "ä¼šå‘˜",
        "attribute": [
          {
            "name": "ä¼šå‘˜ID",
            "type": "PK"
          },
          {
            "name": "ç”¨æˆ·å",
            "type": "varchar(50)"
          },
          {
            "name": "é‚®ç®±",
            "type": "varchar(100)"
          },
          {
            "name": "å¯†ç å“ˆå¸Œ",
            "type": "varchar(255)"
          },
          {
            "name": "æ‰‹æœºå·",
            "type": "varchar(20)"
          },
          {
            "name": "ä¼šå‘˜ç­‰çº§",
            "type": "enum('æ™®é€šä¼šå‘˜','é“¶å¡ä¼šå‘˜','é‡‘å¡ä¼šå‘˜')"
          },
          {
            "name": "ç§¯åˆ†ä½™é¢",
            "type": "int"
          },
          {
            "name": "æ³¨å†Œæ—¶é—´",
            "type": "datetime"
          },
          {
            "name": "æœ€åç™»å½•æ—¶é—´",
            "type": "datetime"
          },
          {
            "name": "çŠ¶æ€",
            "type": "enum('active','inactive','banned')"
          }
        ]
      },
      {
        "name": "å•†å“",
        "attribute": [
          {
            "name": "å•†å“ID",
            "type": "PK"
          },
          {
            "name": "å•†å“åç§°",
            "type": "varchar(200)"
          },
          {
            "name": "å•†å“æè¿°",
            "type": "text"
          },
          {
            "name": "ä»·æ ¼",
            "type": "decimal(10,2)"
          },
          {
            "name": "åº“å­˜æ•°é‡",
            "type": "int"
          },
          {
            "name": "å•†å“çŠ¶æ€",
            "type": "enum('on_sale','off_sale','deleted')"
          },
          {
            "name": "åˆ›å»ºæ—¶é—´",
            "type": "datetime"
          },
          {
            "name": "æ›´æ–°æ—¶é—´",
            "type": "datetime"
          }
        ]
      },
      {
        "name": "è®¢å•",
        "attribute": [
          {
            "name": "è®¢å•ID",
            "type": "PK"
          },
          {
            "name": "ä¼šå‘˜ID",
            "type": "FK"
          },
          {
            "name": "è®¢å•å·",
            "type": "varchar(50)"
          },
          {
            "name": "è®¢å•çŠ¶æ€",
            "type": "enum('å¾…æ”¯ä»˜','å·²æ”¯ä»˜','å·²å‘è´§','å·²å®Œæˆ')"
          },
          {
            "name": "è®¢å•é‡‘é¢",
            "type": "decimal(10,2)"
          },
          {
            "name": "æ”¯ä»˜æ–¹å¼",
            "type": "enum('æ”¯ä»˜å®','å¾®ä¿¡æ”¯ä»˜','é“¶è¡Œå¡')"
          },
          {
            "name": "æ”¯ä»˜æ—¶é—´",
            "type": "datetime"
          },
          {
            "name": "åˆ›å»ºæ—¶é—´",
            "type": "datetime"
          },
          {
            "name": "æ›´æ–°æ—¶é—´",
            "type": "datetime"
          }
        ]
      },
      {
        "name": "è®¢å•è¯¦æƒ…",
        "attribute": [
          {
            "name": "è¯¦æƒ…ID",
            "type": "PK"
          },
          {
            "name": "è®¢å•ID",
            "type": "FK"
          },
          {
            "name": "å•†å“ID",
            "type": "FK"
          },
          {
            "name": "å•†å“åç§°",
            "type": "varchar(200)"
          },
          {
            "name": "å•†å“å•ä»·",
            "type": "decimal(10,2)"
          },
          {
            "name": "è´­ä¹°æ•°é‡",
            "type": "int"
          },
          {
            "name": "å°è®¡é‡‘é¢",
            "type": "decimal(10,2)"
          }
        ]
      }
    ],
    "relationship": [
      {
        "name": "åˆ›å»ºè®¢å•",
        "from": "ä¼šå‘˜",
        "to": "è®¢å•",
        "type": "one-to-many"
      },
      {
        "name": "åŒ…å«å•†å“",
        "from": "è®¢å•",
        "to": "è®¢å•è¯¦æƒ…",
        "type": "one-to-many"
      },
      {
        "name": "å…³è”å•†å“",
        "from": "è®¢å•è¯¦æƒ…",
        "to": "å•†å“",
        "type": "many-to-one"
      }
    ],
    "created_at": "2025-01-20 16:00:00"
  }
}
```

### **3. è·å–ERæ¨¡å‹åˆ—è¡¨**

#### **æ¥å£ä¿¡æ¯**
- **URL**: `/api/er/query`
- **æ–¹æ³•**: `POST`
- **æè¿°**: è·å–ERæ¨¡å‹åˆ—è¡¨

#### **è¯·æ±‚å‚æ•°**
```javascript
{
  "pageNum": 1,           // é¡µç ï¼Œé»˜è®¤1
  "pageSize": 10,     // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10
  "startTime":"2025-8-01",
  "endTime":"",
  "requirement_id": "", // éœ€æ±‚IDï¼Œå¯é€‰
  "userId": ""        // ç”¨æˆ·IDï¼Œå¯é€‰
}
```

#### **æœŸæœ›å“åº”**
```javascript
{
  "code": 00,
  "msg": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
   "record":[
    {
      "erId":10,                       //éå¸¸å…³é”®ï¼Œè¦é€šè¿‡eridå»æŸ¥eræ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯
      "erName":"å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ",
      "description":"ç¤ºä¾‹æ¨¡å‹",
      "updateAt":"2025-08-15"
    },
    ......
   ],
   "total":25,
   "pageNum":1,
   "pageSize":10
  }
}


```

### **4. åˆ›å»ºERæ¨¡å‹**

#### **æ¥å£ä¿¡æ¯**
- **URL**: `/api/er/edit`
- **æ–¹æ³•**: `PUT`
- **æè¿°**: ä¿®æ”¹ERæ¨¡å‹åˆ°ä»“åº“

#### **è¯·æ±‚æŠ¥æ–‡**
```javascript
{
  "code": 00,
  "msg": "ç”ŸæˆæˆåŠŸ",
  "data": {
    "erId": "temp_12345",
    "erName": "111",
    "userID":"1000000",
    "description": "åŸºäºéœ€æ±‚'ä¼šå‘˜è®¢å•ç®¡ç†ç³»ç»Ÿéœ€æ±‚'ç”Ÿæˆçš„æ•°æ®åº“è®¾è®¡",
    "erJson":{
    "entities": [
      {
        "name": "member",
        "attribute": [
          {
            "å­—æ®µè‹±æ–‡å": "memberid",
            "å­—æ®µä¸­æ–‡å": "ä¼šå‘˜id"
          },
          {
            "å­—æ®µè‹±æ–‡å": "grade",
            "å­—æ®µä¸­æ–‡å": "ç­‰çº§"
          }
        ]
      },
      {
        "name": "order",
        "attribute": [
          {
            "å­—æ®µè‹±æ–‡å": "orderID",
            "å­—æ®µä¸­æ–‡å": "è®¢å•ID"
          },
          {
            "å­—æ®µè‹±æ–‡å": "orderNumber",
            "å­—æ®µä¸­æ–‡å": "è®¢å•å·"
          },
          {
            "å­—æ®µè‹±æ–‡å": "createTime",
            "å­—æ®µä¸­æ–‡å": "åˆ›å»ºæ—¶é—´"
          },
          {
            "å­—æ®µè‹±æ–‡å": "updateTime",
            "å­—æ®µä¸­æ–‡å": "ä¿®æ”¹æ—¶é—´"
          }
        ]
      }],
    "relationship": [
      {
        "name": "åˆ›å»º",
        "from": "member",
        "to": "è®¢å•",
        "type": "1:N"
      }
    ]
    },
  }
}
```

#### **æœŸæœ›å“åº”**
```javascript
{
  "code": 00,
  "msg": "æ“ä½œæˆåŠŸ",
}
```

### **5. æ›´æ–°ERæ¨¡å‹**//å¯ä»¥å¤ç”¨æ¥å£4


### **6. åˆ é™¤ERæ¨¡å‹**

#### **æ¥å£ä¿¡æ¯**
- **URL**: `/api/er/{erId}?userId=xxx`
- **æ–¹æ³•**: `DELETE`
- **æè¿°**: åˆ é™¤ERæ¨¡å‹

#### **è¯·æ±‚å‚æ•°**
```javascript
// è·¯å¾„å‚æ•°
{
  "erId": 2 , // ERæ¨¡å‹ID
  "userId":"100000003",//æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªeræ¨¡å‹ä»“åº“
}
```

#### **æœŸæœ›å“åº”**
```javascript
{
  "code": 00,
  "msg": "åˆ é™¤æˆåŠŸ",

}
```


### **7. æŸ¥è¯¢æŸä¸ªERæ¨¡å‹è¯¦æƒ…**

#### **æ¥å£ä¿¡æ¯**
- **URL**: `/api/er/{erId}?userId=xxx`
- **æ–¹æ³•**: `GET`
- **æè¿°**: æŸ¥è¯¢æŸä¸€ä¸ªERæ¨¡å‹è¯¦æƒ…

#### **è¯·æ±‚å‚æ•°**
```javascript
// è·¯å¾„å‚æ•°
{
  "erId": 2,
  "userId":"100000"  // ç”¨æˆ·id
}
```

#### **æœŸæœ›å“åº”**
```javascript
{
  "code": 00,
  "msg": "ç”ŸæˆæˆåŠŸ",
  "data": {
    "erId": "temp_12345",
    "erName": "111",
    "description": "åŸºäºéœ€æ±‚'ä¼šå‘˜è®¢å•ç®¡ç†ç³»ç»Ÿéœ€æ±‚'ç”Ÿæˆçš„æ•°æ®åº“è®¾è®¡",
    "erJson":{
    "entities": [
      {
        "name": "ä¼šå‘˜",
        "attribute": [
          {
            "name": "ä¼šå‘˜ID",
            "type": "PK"
          },
          {
            "name": "ç”¨æˆ·å",
            "type": "varchar(50)"
          },
          {
            "name": "é‚®ç®±",
            "type": "varchar(100)"
          },
          {
            "name": "å¯†ç å“ˆå¸Œ",
            "type": "varchar(255)"
          },
          {
            "name": "æ‰‹æœºå·",
            "type": "varchar(20)"
          },
          {
            "name": "ä¼šå‘˜ç­‰çº§",
            "type": "enum('æ™®é€šä¼šå‘˜','é“¶å¡ä¼šå‘˜','é‡‘å¡ä¼šå‘˜')"
          },
          {
            "name": "ç§¯åˆ†ä½™é¢",
            "type": "int"
          },
          {
            "name": "æ³¨å†Œæ—¶é—´",
            "type": "datetime"
          },
          {
            "name": "æœ€åç™»å½•æ—¶é—´",
            "type": "datetime"
          },
          {
            "name": "çŠ¶æ€",
            "type": "enum('active','inactive','banned')"
          }
        ]
      },
      {
        "name": "å•†å“",
        "attribute": [
          {
            "name": "å•†å“ID",
            "type": "PK"
          },
          {
            "name": "å•†å“åç§°",
            "type": "varchar(200)"
          },
          {
            "name": "å•†å“æè¿°",
            "type": "text"
          },
          {
            "name": "ä»·æ ¼",
            "type": "decimal(10,2)"
          },
          {
            "name": "åº“å­˜æ•°é‡",
            "type": "int"
          },
          {
            "name": "å•†å“çŠ¶æ€",
            "type": "enum('on_sale','off_sale','deleted')"
          },
          {
            "name": "åˆ›å»ºæ—¶é—´",
            "type": "datetime"
          },
          {
            "name": "æ›´æ–°æ—¶é—´",
            "type": "datetime"
          }
        ]
      },
      {
        "name": "è®¢å•",
        "attribute": [
          {
            "name": "è®¢å•ID",
            "type": "PK"
          },
          {
            "name": "ä¼šå‘˜ID",
            "type": "FK"
          },
          {
            "name": "è®¢å•å·",
            "type": "varchar(50)"
          },
          {
            "name": "è®¢å•çŠ¶æ€",
            "type": "enum('å¾…æ”¯ä»˜','å·²æ”¯ä»˜','å·²å‘è´§','å·²å®Œæˆ')"
          },
          {
            "name": "è®¢å•é‡‘é¢",
            "type": "decimal(10,2)"
          },
          {
            "name": "æ”¯ä»˜æ–¹å¼",
            "type": "enum('æ”¯ä»˜å®','å¾®ä¿¡æ”¯ä»˜','é“¶è¡Œå¡')"
          },
          {
            "name": "æ”¯ä»˜æ—¶é—´",
            "type": "datetime"
          },
          {
            "name": "åˆ›å»ºæ—¶é—´",
            "type": "datetime"
          },
          {
            "name": "æ›´æ–°æ—¶é—´",
            "type": "datetime"
          }
        ]
      },
      {
        "name": "è®¢å•è¯¦æƒ…",
        "attribute": [
          {
            "name": "è¯¦æƒ…ID",
            "type": "PK"
          },
          {
            "name": "è®¢å•ID",
            "type": "FK"
          },
          {
            "name": "å•†å“ID",
            "type": "FK"
          },
          {
            "name": "å•†å“åç§°",
            "type": "varchar(200)"
          },
          {
            "name": "å•†å“å•ä»·",
            "type": "decimal(10,2)"
          },
          {
            "name": "è´­ä¹°æ•°é‡",
            "type": "int"
          },
          {
            "name": "å°è®¡é‡‘é¢",
            "type": "decimal(10,2)"
          }
        ]
      }
    ],
    "relationship": [
      {
        "name": "åˆ›å»ºè®¢å•",
        "from": "ä¼šå‘˜",
        "to": "è®¢å•",
        "type": "one-to-many"
      },
      {
        "name": "åŒ…å«å•†å“",
        "from": "è®¢å•",
        "to": "è®¢å•è¯¦æƒ…",
        "type": "one-to-many"
      },
      {
        "name": "å…³è”å•†å“",
        "from": "è®¢å•è¯¦æƒ…",
        "to": "å•†å“",
        "type": "many-to-one"
      }
    ]
    },
    "updateAt": "2025-01-20 16:00:00"
  }
}
```

